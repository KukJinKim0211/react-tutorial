{"ast":null,"code":"var _jsxFileName = \"/Users/kimkukjin/Git/react/skeleton-project-master/frontend/src/components/Create/DialogActionsComponet/index.jsx\";\nimport React, { useContext } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport { useHistory } from 'react-router-dom';\nimport Fab from '@material-ui/core/Fab';\nimport Axios from 'axios';\nimport { CommonContext } from '../../../context/CommonContext';\nimport { ViewContext } from '../../../context/ViewContext';\nimport Wrapper from './styles';\n\nconst DialogActionsComponet = () => {\n  const {\n    serverUrl,\n    user,\n    setSignDialogOpen,\n    setUser,\n    setEndDt\n  } = useContext(CommonContext);\n  let history = useHistory();\n  const {\n    data,\n    title,\n    thumbnailImageData,\n    isMultipleChoice,\n    isPowerVoteChoice,\n    description,\n    readyToUpload,\n    category,\n    endDt\n  } = useContext(ViewContext);\n\n  const createVoteHandler = async () => {\n    if (user.user_id === '') {\n      alert('Pleae sign in to upload.');\n      setSignDialogOpen(true);\n      return;\n    }\n\n    if (title === '') {\n      alert(`Please enter your vote title.`);\n      return;\n    }\n\n    if (category === 0) {\n      alert(`Please select your vote category.`);\n      return;\n    }\n\n    if (thumbnailImageData.img === '') {\n      alert(`Please register thumbnail image to upload your vote.`);\n      return;\n    }\n\n    if (data[0].optionTitle === '' || data[1].optionTitle === '') {\n      alert(`Option1 and option2 are mandatory.`);\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('files', thumbnailImageData.file);\n\n    for (const optionData of data) {\n      if (optionData.targetUploadType === 'image') {\n        formData.append('files', optionData.uploadTarget);\n      }\n    }\n\n    var optionData = {\n      title: title,\n      description: description,\n      data: data.map(x => {\n        return {\n          optionTitle: x.optionTitle,\n          targetUploadType: x.targetUploadType,\n          uploadTargetPath: x.targetUploadType !== 'image' ? x.uploadTarget : x.uploadTarget.path\n        };\n      }),\n      isMultipleChoice,\n      category,\n      isPowerVoteChoice,\n      thumbnailImage: thumbnailImageData.file.path,\n      end_dt: endDt\n    };\n    formData.append('optionData', JSON.stringify(optionData));\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data',\n        authorization: user.token\n      }\n    };\n    console.log({\n      user\n    });\n    console.log({\n      formData\n    });\n    console.log({\n      config\n    }); //\n\n    alert('Registered.');\n    history.push(`/MyVote`);\n  };\n\n  const handleClose = () => {\n    history.goBack();\n  };\n\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"flex-end\",\n    alignItems: \"center\",\n    className: \"dialog-actions-componet-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    variant: \"extended\",\n    \"aria-label\": \"like\",\n    onClick: handleClose,\n    className: \"up-cancel-fab dialog-actions-componet-fab1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, \"CANCEL\"), /*#__PURE__*/React.createElement(Fab, {\n    variant: \"extended\",\n    \"aria-label\": \"like\",\n    color: \"inherit\",\n    onClick: readyToUpload && createVoteHandler,\n    className: \"up-cancel-fab\",\n    style: {\n      backgroundColor: readyToUpload ? '#1FA212' : '#E0E0E0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, \"UPLOAD\")));\n};\n\nexport default DialogActionsComponet;","map":{"version":3,"names":["React","useContext","Grid","useHistory","Fab","Axios","CommonContext","ViewContext","Wrapper","DialogActionsComponet","serverUrl","user","setSignDialogOpen","setUser","setEndDt","history","data","title","thumbnailImageData","isMultipleChoice","isPowerVoteChoice","description","readyToUpload","category","endDt","createVoteHandler","user_id","alert","img","optionTitle","formData","FormData","append","file","optionData","targetUploadType","uploadTarget","map","x","uploadTargetPath","path","thumbnailImage","end_dt","JSON","stringify","config","headers","authorization","token","console","log","push","handleClose","goBack","backgroundColor"],"sources":["/Users/kimkukjin/Git/react/skeleton-project-master/frontend/src/components/Create/DialogActionsComponet/index.jsx"],"sourcesContent":["import React, { useContext } from 'react';\n\nimport Grid from '@material-ui/core/Grid';\n\nimport { useHistory } from 'react-router-dom';\n\nimport Fab from '@material-ui/core/Fab';\n\nimport Axios from 'axios';\n\nimport { CommonContext } from '../../../context/CommonContext';\nimport { ViewContext } from '../../../context/ViewContext';\n\nimport Wrapper from './styles';\n\nconst DialogActionsComponet = () => {\n  const { serverUrl, user, setSignDialogOpen, setUser, setEndDt } = useContext(\n    CommonContext,\n  );\n\n  let history = useHistory();\n\n  const {\n    data,\n    title,\n    thumbnailImageData,\n    isMultipleChoice,\n    isPowerVoteChoice,\n    description,\n    readyToUpload,\n    category,\n    endDt,\n  } = useContext(ViewContext);\n\n  const createVoteHandler = async () => {\n    if (user.user_id === '') {\n      alert('Pleae sign in to upload.');\n      setSignDialogOpen(true);\n      return;\n    }\n\n    if (title === '') {\n      alert(`Please enter your vote title.`);\n      return;\n    }\n    if (category === 0) {\n      alert(`Please select your vote category.`);\n      return;\n    }\n\n    if (thumbnailImageData.img === '') {\n      alert(`Please register thumbnail image to upload your vote.`);\n      return;\n    }\n    if (data[0].optionTitle === '' || data[1].optionTitle === '') {\n      alert(`Option1 and option2 are mandatory.`);\n      return;\n    }\n\n    const formData = new FormData();\n\n    formData.append('files', thumbnailImageData.file);\n\n    for (const optionData of data) {\n      if (optionData.targetUploadType === 'image') {\n        formData.append('files', optionData.uploadTarget);\n      }\n    }\n\n    var optionData = {\n      title: title,\n      description: description,\n      data: data.map(x => {\n        return {\n          optionTitle: x.optionTitle,\n          targetUploadType: x.targetUploadType,\n          uploadTargetPath:\n            x.targetUploadType !== 'image'\n              ? x.uploadTarget\n              : x.uploadTarget.path,\n        };\n      }),\n      isMultipleChoice,\n      category,\n      isPowerVoteChoice,\n      thumbnailImage: thumbnailImageData.file.path,\n      end_dt: endDt,\n    };\n\n    formData.append('optionData', JSON.stringify(optionData));\n\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data',\n        authorization: user.token,\n      },\n    };\n\n    console.log({ user });\n    console.log({ formData });\n    console.log({ config });\n\n    //\n    alert('Registered.');\n    history.push(`/MyVote`);\n  };\n\n  const handleClose = () => {\n    history.goBack();\n  };\n\n  return (\n    <Wrapper>\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"flex-end\"\n        alignItems=\"center\"\n        className=\"dialog-actions-componet-grid\"\n      >\n        <Fab\n          variant=\"extended\"\n          aria-label=\"like\"\n          onClick={handleClose}\n          className=\"up-cancel-fab dialog-actions-componet-fab1\"\n        >\n          CANCEL\n        </Fab>\n\n        <Fab\n          variant=\"extended\"\n          aria-label=\"like\"\n          color=\"inherit\"\n          onClick={readyToUpload && createVoteHandler}\n          className=\"up-cancel-fab\"\n          style={{\n            backgroundColor: readyToUpload ? '#1FA212' : '#E0E0E0',\n          }}\n        >\n          UPLOAD\n        </Fab>\n      </Grid>\n    </Wrapper>\n  );\n};\n\nexport default DialogActionsComponet;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}